<h1><%= @product.name if @product %></h1>

<p><%= @product.description if @product %></p>

<h2>Reviews</h2>

<% if @product.reviews.any? %>
  <ul>
    <% @product.reviews.each do |review| %>
      <li>
        <strong><%= review.rating %> stars</strong>
        <%= review.comment %>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>No reviews yet.</p>
<% end %>

<h2>Add a review</h2>

<% if current_user.present? && @product.bookings.where(user: current_user).any? %>
  <%= render 'reviews/form', review: @review %>
<% else %>
  <p>You need to book this product before you can review it.</p>
<% end %>

<%= render partial: 'bookings/form', locals: {product: @product, booking: @booking} %>

<%= button_to 'Delete', @product, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %>
<%= link_to 'Edit', edit_product_path(@product) %> |
<%= link_to 'Back', products_path %>
